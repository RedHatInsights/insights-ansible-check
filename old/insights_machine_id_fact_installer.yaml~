- hosts: all
  user: root
  tasks:
    - name: remove old fact gathering file
      file: state=absent path=/etc/ansible/facts.d/insights_machine_id.fact 
    - name: remove old fact gathering file
      file: state=absent path=/etc/ansible/facts.d/insights_ini.fact 
    - name: remove old fact gathering file
      file: state=absent path=/etc/ansible/facts.d/insights_bash.fact 
    - name: create directory for ansible custom facts
      file: state=directory recurse=yes path=/etc/ansible/facts.d
    - name: install custom impi fact
      copy: src=insights.fact dest=/etc/ansible/facts.d mode=a+x
    - name: re-read facts after adding custom fact
      setup: filter=ansible_local
    - debug: var=ansible_local.insights.machine_id
    - debug: var=ansible_local.insights.system_id
    - debug: var=ansible_local.insights